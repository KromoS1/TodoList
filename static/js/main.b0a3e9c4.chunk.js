(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{220:function(t,e,a){},221:function(t,e,a){},345:function(t,e,a){"use strict";a.r(e);var n=a(0),s=a.n(n),i=a(13),r=a.n(i);a(220),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(221);var c,o,l=a(14),u=a(15),d=a.n(u),b=a(24),j=a(23),p=a(7),O=a(154),f=a.n(O).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"23cf7b54-6cd9-4cb1-a851-3767976432ef"}}),h=function(){return f.get("auth/me").then((function(t){return t.data}))},m=function(t,e,a,n){return f.post("auth/login",{email:t,password:e,rememberMe:a,captcha:n}).then((function(t){return t.data}))},x=function(){return f.delete("auth/login").then((function(t){return t.data}))},v=function(){return f.get("todo-lists").then((function(t){return t.data}))},g=function(t){return f.post("todo-lists",{title:t}).then((function(t){return t.data}))},T=function(t,e){return f.put("todo-lists/".concat(e),{title:t}).then((function(t){return t.data}))},S=function(t){return f.delete("todo-lists/".concat(t)).then((function(t){return t.data}))},k={getTodoLists:function(t){return{type:"GET-TODO-LISTS",todoLists:t}},addTodoList:function(t){return{type:"ADD-TODOLIST",todoList:t}},removeTodoList:function(t){return{type:"REMOVE-TODOLIST",todoListId:t}},changeTodoListTitle:function(t,e){return{type:"CHANGE-TODOLIST-TITLE",todoListID:t,title:e}},changeTodoListFilter:function(t,e){return{type:"CHANGE-TODOLIST-FILTER",todoListID:t,filter:e}},addTasksTodoList:function(t){return{type:"ADD-TASKS-FOR-TODOLIST",todoListId:t}},isDisable:function(t,e){return{type:"IS-DISABLE",disable:t,todoListId:e}}},L={getTask:function(t,e){return{type:"GET-TASK",todoListId:t,tasks:e}},addTask:function(t){return{type:"ADD-TASK",task:t}},removeTask:function(t,e){return{type:"REMOVE-TASK",todoListId:e,idTask:t}},changeTask:function(t,e,a){return{type:"CHANGE-TASK",todoListId:t,idTask:e,task:a}}},A={setStatusApp:function(t){return{type:"SET-APP-STATUS",status:t}},setMessageStatus:function(t){return{type:"SET-MESSAGE-STATUS",message:t}},setAppInitialized:function(t){return{type:"SET-APP-INITIALIZED",isInitialized:t}}},y={setMeData:function(t,e){return{type:"SET-ME-DATA",data:t,isAuth:e}},logOut:function(){return{type:"LOG-OUT"}}},w=function(t,e){t.messages.length?e(A.setMessageStatus(t.messages[0])):e(A.setMessageStatus("Some error occurred.")),e(A.setStatusApp("failed"))},D=function(t,e){e(A.setMessageStatus(t.message)),e(A.setStatusApp("failed"))},I=[],C=Object(p.a)(Object(p.a)({},k),A),E=a(51),M=function(t){return f.get("/todo-lists/".concat(t,"/tasks")).then((function(t){return t.data.items}))},P=function(t,e){return f.post("/todo-lists/".concat(t,"/tasks"),{title:e}).then((function(t){return t.data}))},N=function(t,e,a){return f.put("/todo-lists/".concat(t,"/tasks/").concat(e),Object(p.a)({},a)).then((function(t){return t.data}))},F=function(t,e){return f.delete("/todo-lists/".concat(t,"/tasks/").concat(e)).then((function(t){return t.data.resultCode}))},R={},H=Object(p.a)(Object(p.a)(Object(p.a)({},L),A),k),G=function(t){return function(){var e=Object(b.a)(d.a.mark((function e(a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(H.setStatusApp("load")),e.prev=1,e.next=4,M(t);case 4:n=e.sent,a(H.getTask(t,n)),a(H.setStatusApp("idle")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),D(e.t0,a);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},V=a(387),z=a(347),K=a(22),W=a(383),U=a(386),q=a(382),B=a(384),_=a(378),J=a(2),Y=s.a.memo((function(t){var e=t.titleP,a=t.filterP,n=t.onClickHandlerP;return Object(J.jsx)("div",{children:Object(J.jsx)(_.a,{variant:a===e?"contained":"outlined",onClick:n,color:"primary",children:e})})})),Z=a(6),$=a(398),Q=a(95),X=a(396),tt=a(395),et=a(165),at=a.n(et),nt=a(401),st=function(t){var e=t.date,a=t.nameDate,s=Object(n.useState)(e),i=Object(K.a)(s,2),r=i[0],c=i[1],o=it();return Object(J.jsx)("form",{className:o.container,noValidate:!0,children:Object(J.jsx)(tt.a,{id:"datetime-local",label:a,type:"datetime-local",defaultValue:r,onChange:function(e){c(e.currentTarget.value),t.saveDate(r)},className:o.textFieldTitle,InputLabelProps:{shrink:!0}})})},it=Object(q.a)((function(t){return Object(nt.a)({container:{display:"flex",flexWrap:"wrap",margin:"10px 0 0 0"},textFieldTitle:{marginLeft:t.spacing(1),marginRight:t.spacing(1),width:210}})})),rt=a(166),ct=a.n(rt),ot=a(402),lt=a(403),ut=a(42),dt=a(38),bt=[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"}],jt=s.a.memo((function(t){var e=Object(n.useState)("4"),a=Object(K.a)(e,2),s=a[0],i=a[1],r=ft(),c=dt.a().shape({title:dt.b().max(100,"Too long").trim()}),o=Object(ut.a)({initialValues:{title:t.title,type:t.type,disable:t.disable},validationSchema:c,onSubmit:function(e,a){var n=a.resetForm;t.changeTitle(e.title),n({})}});return"priority"===t.type?Object(J.jsxs)("form",{onSubmit:o.handleSubmit,children:[Object(J.jsx)(tt.a,{id:"standard-select-currency",select:!0,label:"Select",value:s,onChange:function(t){i(t.target.value)},helperText:"Please select your priority",disabled:o.values.disable,autoFocus:!0,children:bt.map((function(t){return Object(J.jsx)(ot.a,{value:t.value,children:t.label},t.value)}))}),Object(J.jsx)("div",{style:{position:"fixed"},children:o.errors.title?Object(J.jsx)("div",{children:o.errors.title}):null})]}):Object(J.jsxs)("form",{onSubmit:o.handleSubmit,children:[Object(J.jsx)(tt.a,Object(p.a)(Object(p.a)({},o.getFieldProps("title")),{},{className:r.textFieldTitle,disabled:o.values.disable,autoFocus:!0})),Object(J.jsx)("div",{style:{position:"fixed"},children:o.errors.title?Object(J.jsx)("div",{children:o.errors.title}):null})]})})),pt=Object(ut.b)({mapPropsToValues:function(t){return{title:t.title,disable:t.disable,onSubmit:t.changeTitle,type:t.type}},handleSubmit:function(t,e){e.props.changeTitle(t.title)}})(jt),Ot=function(t){var e=Object(n.useState)(!1),a=Object(K.a)(e,2),s=a[0],i=a[1],r=Object(n.useCallback)((function(e){t.changeTitle(e),i(!1)}),[t]);return Object(J.jsx)(J.Fragment,{children:s?Object(J.jsx)(pt,{type:"title",title:t.title,changeTitle:r,disable:t.disable}):Object(J.jsx)(lt.a,{title:t.title,placement:"top",children:Object(J.jsx)("span",{onClick:function(){i(!0)},children:t.title.length>23?t.title.substr(0,23)+"...":t.title})})})},ft=Object(q.a)((function(t){return Object(nt.a)({textFieldTitle:{maxWidth:"130px"},textFieldPriority:{"& .MuiTextField-root":{margin:t.spacing(1),width:"25ch"}}})})),ht=s.a.memo((function(t){var e=Object(l.b)();Object(n.useEffect)((function(){e(G(t.task.todoListId))}),[]);var a=Object(n.useState)(t.task.description),s=Object(K.a)(a,2),i=s[0],r=s[1],c=Object(n.useState)(Object(p.a)({},t.task)),o=Object(K.a)(c,2),u=o[0],d=o[1],b=[],j=mt(),O=function(t){b.push(t)};return Object(J.jsx)(X.a,{className:j.root,zIndex:"tooltip",children:Object(J.jsx)(z.a,{elevation:20,className:j.box,children:Object(J.jsxs)("form",{children:[Object(J.jsxs)("div",{className:j.header,children:[Object(J.jsx)("div",{children:Object(J.jsx)(W.a,{onClick:function(){return t.showDetails()},children:Object(J.jsx)(at.a,{})})}),Object(J.jsx)("div",{className:j.font,children:Object(J.jsx)("span",{children:u.title})}),Object(J.jsx)("div",{className:j.font,children:Object(J.jsx)(Ot,{title:u.priority+"",changeTitle:function(t){var e=Number(t);d(Object(p.a)(Object(p.a)({},u),{},{priority:e}))},type:"priority"})})]}),Object(J.jsxs)("div",{className:j.content,children:[Object(J.jsxs)("div",{className:j.dates,children:[Object(J.jsx)(st,{date:u.addedDate,nameDate:"Added Start",saveDate:O}),Object(J.jsx)(st,{date:u.startDate,nameDate:"Start Date",saveDate:O}),Object(J.jsx)(st,{date:u.deadline,nameDate:"Dead line",saveDate:O})]}),Object(J.jsx)("div",{className:j.description,children:Object(J.jsx)(tt.a,{variant:"outlined",value:i,label:"Description",onChange:function(t){return r(t.currentTarget.value)},multiline:!0,rows:8,fullWidth:!0})})]}),Object(J.jsx)("div",{children:Object(J.jsx)(_.a,{variant:"outlined",color:"primary",size:"small",className:j.button,onClick:function(){var e={priority:u.priority,description:i,addedDate:b[0],startDate:b[1],deadline:b[2]};t.changeTask(e),t.showDetails()},startIcon:Object(J.jsx)(ct.a,{}),children:"Save"})})]})})})})),mt=Object(q.a)((function(t){return{root:{display:"flex",flexWrap:"wrap","& > *":{margin:t.spacing(1),width:"47vw",height:"42vh"},top:"200px",left:"400px",position:"absolute",backgroundColor:"#3f51b5",borderRadius:"15px"},box:{backgroundColor:"#ffffff"},font:{fontSize:"24px",fontWeight:"bold",marginRight:"35px"},header:{display:"flex",justifyContent:"space-between",margin:"10px 20px 10px 10px"},content:{display:"flex",justifyContent:"space-around"},dates:{},description:{width:"350px"},button:{margin:t.spacing(2.5)}}}));!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(c||(c={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(o||(o={}));var xt=a(167),vt=a.n(xt),gt=s.a.memo((function(t){var e=Object(n.useState)(!1),a=Object(K.a)(e,2),s=a[0],i=a[1],r=Object(n.useCallback)((function(){t.removeTask(t.task.id,t.todoListId)}),[t]),o=Object(n.useCallback)((function(){i(!s)}),[s]),l=Object(n.useCallback)((function(e){t.changeTask(t.todoListId,t.task.id,e)}),[t]),u=Object(n.useCallback)((function(t){l({title:t})}),[l]),d=Object(J.jsx)(J.Fragment,{children:Object(J.jsxs)("div",{className:"task",children:[Object(J.jsx)(St,{checked:t.task.status===c.InProgress,onChange:function(t){t.currentTarget.checked?l({status:c.InProgress}):l({status:c.New})},disabled:t.disable}),Object(J.jsx)(Ot,{type:"title",title:t.task.title,changeTitle:u,disable:t.disable}),Object(J.jsx)(W.a,{onClick:o,disabled:t.disable,children:Object(J.jsx)(vt.a,{})}),Object(J.jsx)(W.a,{onClick:r,disabled:t.disable,children:Object(J.jsx)(B.a,{})})]},t.task.id)});return s?Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(ht,{task:t.task,changeTask:l,showDetails:o}),d]}):Object(J.jsx)(J.Fragment,{children:d})})),Tt=function(t){var e,a=Object(l.b)(),s=Object(n.useCallback)((function(t,e,n){a(function(t,e,a){return function(){var n=Object(b.a)(d.a.mark((function n(s,i){var r,c,o;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s(H.setStatusApp("load")),s(H.isDisable(!0,t)),r=i().tasks[t].find((function(t){return t.id===e}))){n.next=5;break}throw new Error("task not found in the state");case 5:return c=Object(p.a)({title:r.title,order:r.order,description:r.description,priority:r.priority,status:r.status,addedDate:r.addedDate,startDate:r.startDate,deadline:r.deadline},a),n.prev=6,n.next=9,N(t,e,c);case 9:0===(o=n.sent).resultCode?(s(H.changeTask(t,e,o.data.item)),s(H.setStatusApp("succeeded")),s(H.setMessageStatus("Task change succeeded.")),s(H.isDisable(!1,t))):w(o,s),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(6),D(n.t0,s),s(H.isDisable(!1,t));case 17:case"end":return n.stop()}}),n,null,[[6,13]])})));return function(t,e){return n.apply(this,arguments)}}()}(t,e,n))}),[a]),i=Object(n.useCallback)((function(t,e){var n,s;a((n=e,s=t,function(){var t=Object(b.a)(d.a.mark((function t(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(H.setStatusApp("load")),e(H.isDisable(!0,n)),t.prev=2,t.next=5,F(n,s);case 5:0===t.sent&&(e(H.removeTask(s,n)),e(H.setStatusApp("succeeded")),e(H.setMessageStatus("Task remove succeeded.")),e(H.isDisable(!1,n))),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),D(t.t0,e),e(H.isDisable(!1,n));case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()))}),[a]);if(void 0!==t.tasks){var r=t.tasks;"active"===t.filter&&(r=t.tasks.filter((function(t){return t.status===c.New}))),"completed"===t.filter&&(r=t.tasks.filter((function(t){return t.status===c.InProgress}))),e=r.map((function(e){return Object(J.jsx)(gt,{task:e,disable:t.disable,todoListId:t.todoListId,removeTask:i,changeTask:s},e.id)}))}return Object(J.jsx)(J.Fragment,{children:e})},St=Object(Z.a)({root:{color:Q.a[400],"&$checked":{color:Q.a[600]}},checked:{}})((function(t){return Object(J.jsx)($.a,Object(p.a)({color:"default"},t))})),kt=a(385),Lt=s.a.memo((function(t){var e=Object(ut.a)({initialValues:{title:""},validationSchema:dt.a().shape({title:dt.b().trim("spaces are not allowed at the beginning of the task name.").max(100,"Too long")}),onSubmit:function(e,a){var n=a.resetForm;t.onSubmit(e.title),n({})}});return Object(J.jsxs)("form",{onSubmit:e.handleSubmit,style:{position:"absolute"},children:[Object(J.jsx)(tt.a,Object(p.a)(Object(p.a)({},e.getFieldProps("title")),{},{variant:"outlined",disabled:t.disable,size:"small",label:e.errors.title?"Error":"Title",error:void 0!==e.errors.title,helperText:e.errors.title?e.errors.title:null})),Object(J.jsx)(W.a,{color:"primary",disabled:t.disable,type:"submit",children:Object(J.jsx)(kt.a,{})})]})})),At=Object(ut.b)({mapPropsToValues:function(t){return{title:"",disable:t.disable,onSubmit:t.onSubmit}},handleSubmit:function(t,e){e.props.onSubmit(t.title)}})(Lt),yt=s.a.memo((function(t){var e=Object(l.b)(),a=wt(),s=Object(n.useState)(0),i=Object(K.a)(s,2),r=i[0],c=i[1];Object(n.useEffect)((function(){e(G(t.todoList.id))}),[e,t.todoList.id]);var o=Object(n.useCallback)((function(e){t.addTask(e,t.todoList.id)}),[t]),u=Object(n.useCallback)((function(){return t.changeFilter("all",t.todoList.id)}),[t]),d=Object(n.useCallback)((function(){return t.changeFilter("active",t.todoList.id)}),[t]),b=Object(n.useCallback)((function(){return t.changeFilter("completed",t.todoList.id)}),[t]),j=Object(n.useCallback)((function(e){t.changeTodoListTitle(t.todoList.id,e)}),[t]);return Object(J.jsxs)("div",{className:a.todolist,children:[Object(J.jsxs)("h3",{className:"task_title",children:[Object(J.jsx)(Ot,{title:t.todoList.title,changeTitle:j,type:"title",disable:t.todoList.disable}),Object(J.jsx)(W.a,{onClick:function(){return t.removeTodoList(t.todoList.id)},disabled:t.todoList.disable,children:Object(J.jsx)(B.a,{})})]}),Object(J.jsx)(At,{onSubmit:o,disable:t.todoList.disable}),Object(J.jsx)("div",{className:a.listTasks,children:Object(J.jsx)(Tt,{todoListId:t.todoList.id,tasks:t.tasks,filter:t.todoList.filter,disable:t.todoList.disable})}),Object(J.jsxs)(U.a,{value:r,showLabels:!0,className:a.bntNav,onChange:function(t,e){c(e)},children:[Object(J.jsx)(Y,{titleP:"all",filterP:t.todoList.filter,onClickHandlerP:u}),Object(J.jsx)(Y,{titleP:"active",filterP:t.todoList.filter,onClickHandlerP:d}),Object(J.jsx)(Y,{titleP:"completed",filterP:t.todoList.filter,onClickHandlerP:b}),"}"]})]})})),wt=Object(q.a)({bntNav:{},listTasks:{marginTop:"70px",overflowY:"scroll",height:"300px"},todolist:{overflow:"hidden",minWidth:360,maxHeight:490}}),Dt=a(18),It=a(400),Ct=a(397),Et=function(t){return Object(J.jsx)(Ct.a,Object(p.a)({elevation:6,variant:"filled"},t))},Mt=function(){var t=Object(l.c)((function(t){return t.statusApp})),e=Object(l.b)(),a=function(t,a){"clickaway"!==a&&(e(A.setStatusApp("idle")),e(A.setMessageStatus("")))};return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(It.a,{open:"succeeded"===t.status,autoHideDuration:3e3,onClose:a,children:Object(J.jsx)(Et,{onClose:a,severity:"success",children:t.message})}),Object(J.jsx)(It.a,{open:"failed"===t.status,autoHideDuration:3e3,onClose:a,children:Object(J.jsx)(Et,{onClose:a,severity:"error",children:t.message})})]})},Pt=function(t){var e=Object(l.b)();Object(n.useEffect)((function(){e(function(){var t=Object(b.a)(d.a.mark((function t(e){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(C.setStatusApp("load")),t.prev=1,t.next=4,v();case 4:a=t.sent,e(C.getTodoLists(a)),e(C.setStatusApp("idle")),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),D(t.t0,e);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}())}),[e]);var a=Object(n.useCallback)((function(t,a){e(function(t,e){return function(){var a=Object(b.a)(d.a.mark((function a(n){var s;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(H.setStatusApp("load")),n(H.isDisable(!0,t)),a.prev=2,a.next=5,P(t,e);case 5:0===(s=a.sent).resultCode?(n(H.addTask(s.data.item)),n(H.setStatusApp("succeeded")),n(H.setMessageStatus("Task created succeeded.")),n(H.isDisable(!1,t))):(w(s,n),n(H.isDisable(!1,t))),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(2),D(a.t0,n),n(H.isDisable(!1,t));case 13:case"end":return a.stop()}}),a,null,[[2,9]])})));return function(t){return a.apply(this,arguments)}}()}(a,t))}),[e]),s=Object(n.useCallback)((function(t,a){e(k.changeTodoListFilter(a,t))}),[e]),i=Object(n.useCallback)((function(t,a){e(function(t,e){return function(){var a=Object(b.a)(d.a.mark((function a(n){var s;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(C.setStatusApp("load")),n(C.isDisable(!0,t)),a.prev=2,a.next=5,T(e,t);case 5:0===(s=a.sent).resultCode?(n(C.changeTodoListTitle(t,e)),n(C.setStatusApp("succeeded")),n(C.setMessageStatus("Todo list change succeeded.")),n(C.isDisable(!1,t))):w(s,n),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(2),D(a.t0,n),n(C.isDisable(!1,t));case 13:case"end":return a.stop()}}),a,null,[[2,9]])})));return function(t){return a.apply(this,arguments)}}()}(t,a))}),[e]),r=Object(n.useCallback)((function(t){var a;e((a=t,function(){var t=Object(b.a)(d.a.mark((function t(e){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(C.setStatusApp("load")),e(C.isDisable(!0,a)),t.prev=2,t.next=5,S(a);case 5:0===(n=t.sent).resultCode?(e(C.removeTodoList(a)),e(C.removeTodoList(a)),e(C.setStatusApp("succeeded")),e(C.setMessageStatus("Todo list remove succeeded.")),e(C.isDisable(!1,a))):w(n,e),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),D(t.t0,e),e(C.isDisable(!1,a));case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()))}),[e]),c=t.todoLists.map((function(e){var n=t.tasks[e.id];return Object(J.jsx)(V.a,{item:!0,children:Object(J.jsx)(z.a,{elevation:10,className:"paper_style",children:Object(J.jsx)(yt,{todoList:e,tasks:n,changeFilter:s,addTask:a,removeTodoList:r,changeTodoListTitle:i})})},e.id)}));return Object(J.jsx)(J.Fragment,{children:c})},Nt=function(){var t=Object(l.c)((function(t){return t.isAuth.isAuth})),e=Object(l.c)((function(t){return t.todoLists})),a=Object(l.c)((function(t){return t.tasks})),s=Object(l.b)(),i=Object(n.useCallback)((function(t){s(function(t){return function(){var e=Object(b.a)(d.a.mark((function e(a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(C.setStatusApp("load")),e.prev=1,e.next=4,g(t);case 4:0===(n=e.sent).resultCode?(a(C.addTodoList(n.data.item)),a(C.addTasksTodoList(n.data.item.id)),a(C.setStatusApp("succeeded")),a(C.setMessageStatus("Todo list created succeeded."))):w(n,a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),D(e.t0,a);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()}(t))}),[s]);return t?Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(V.a,{container:!0,style:{padding:"20px"},children:Object(J.jsx)(At,{onSubmit:i,disable:!1})}),Object(J.jsx)(V.a,{container:!0,spacing:5,style:{marginTop:"25px",justifyContent:"center"},children:Object(J.jsx)(Pt,{todoLists:e,tasks:a})}),Object(J.jsx)(Mt,{})]}):Object(J.jsx)(Dt.a,{to:"/login"})},Ft=a(111),Rt={id:0,login:"",email:"",password:"",rememberMe:!1,captcha:!1,isAuth:!1},Ht=Object(p.a)(Object(p.a)({},y),A),Gt=a(388),Vt=s.a.memo((function(t){var e=Kt(),a=t.touched,n=t.errors,s=Object(ut.a)({initialValues:{email:"",password:"",rememberMe:!1},validationSchema:dt.a().shape({email:dt.b().email("Invalid email").required("Required"),password:dt.b().min(8,"Must be 8 characters or more").required("Required")}),onSubmit:function(e){t.onSubmit(e)}});return Object(J.jsx)("form",{onSubmit:s.handleSubmit,children:Object(J.jsxs)(z.a,{elevation:8,className:e.paper,children:[Object(J.jsx)("h1",{children:"Login"}),Object(J.jsx)(tt.a,Object(p.a)({label:"Email"},s.getFieldProps("email"))),a.email&&n.email&&Object(J.jsx)("div",{children:n.email}),Object(J.jsx)(tt.a,Object(p.a)({label:"Password",type:"password"},s.getFieldProps("password"))),s.errors.password?Object(J.jsx)("div",{children:s.errors.password}):null,Object(J.jsx)(Gt.a,{control:Object(J.jsx)($.a,Object(p.a)({color:"primary",checked:s.values.rememberMe},s.getFieldProps("rememberMe"))),label:"Remember me"}),Object(J.jsx)(_.a,{type:"submit",variant:"outlined",color:"primary",children:"Submit"})]})})})),zt=Object(ut.b)({mapPropsToValues:function(t){return{email:t.initialEmail||"",password:t.initialPassword||"",rememberMe:t.initialRememberMe||!1,onSubmit:t.onSubmit}},handleSubmit:function(t,e){e.props.onSubmit(t)}})(Vt),Kt=Object(q.a)((function(){return Object(nt.a)({paper:{minWidth:"300px",minHeight:"350px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-around"}})})),Wt=s.a.memo((function(){var t=Object(l.b)(),e=Object(l.c)((function(t){return t.isAuth.isAuth})),a=Ut(),s=Object(n.useCallback)((function(e){var a,n,s,i;void 0===e.rememberMe&&(e.rememberMe=!1),void 0===e.captcha&&(e.captcha=!1),t((a=e.email,n=e.password,s=e.rememberMe,i=e.captcha,function(){var t=Object(b.a)(d.a.mark((function t(e){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(Ht.setStatusApp("load")),t.prev=1,t.next=4,m(a,n,s,i);case 4:0===(r=t.sent).resultCode?(e(function(){var t=Object(b.a)(d.a.mark((function t(e){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(Ht.setStatusApp("load")),t.prev=1,t.next=4,h();case 4:a=t.sent,e(Ht.setMeData(a.data,!0)),e(Ht.setStatusApp("idle")),t.next=14;break;case 9:throw t.prev=9,t.t0=t.catch(1),e(Ht.setStatusApp("failed")),e(Ht.setMessageStatus(t.t0.message)),new Error(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()),e(Ht.setStatusApp("idle"))):e(Object(Ft.a)("login",{_error:r.messages[0]})),t.next=13;break;case 8:throw t.prev=8,t.t0=t.catch(1),e(Ht.setStatusApp("failed")),e(Ht.setMessageStatus(t.t0.message)),new Error(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()))}),[t]);return e?Object(J.jsx)(Dt.a,{to:"/todolists"}):Object(J.jsx)(J.Fragment,{children:Object(J.jsx)(V.a,{container:!0,spacing:5,className:a.login,children:Object(J.jsx)(zt,{onSubmit:s})})})})),Ut=Object(q.a)((function(){return Object(nt.a)({login:{display:"flex",flexDirection:"column",alignContent:"center",marginTop:"50px"}})})),qt=a(389),Bt=a(390),_t=a(348),Jt=a(391),Yt=function(t){return Object(J.jsx)(qt.a,{position:"static",children:Object(J.jsxs)(Bt.a,{style:{justifyContent:"space-between"},children:[Object(J.jsx)(W.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object(J.jsx)(Jt.a,{})}),Object(J.jsx)(_t.a,{variant:"h6",children:"TodoList"}),t.isAuth?Object(J.jsx)(J.Fragment,{children:Object(J.jsx)(_.a,{onClick:t.logout,color:"inherit",children:"Log out"})}):Object(J.jsx)(_.a,{color:"inherit",children:"Login"})]})})},Zt=function(){var t=Object(l.c)((function(t){return t.statusApp.status})),e=Object(l.c)((function(t){return t.isAuth.isAuth})),a=Object(l.c)((function(t){return t.isAuth.login})),n=Object(l.b)();return Object(J.jsx)(Yt,{status:t,isAuth:e,userLogin:a,logout:function(){n(function(){var t=Object(b.a)(d.a.mark((function t(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(Ht.setStatusApp("load")),t.prev=1,t.next=4,x();case 4:0===t.sent.resultCode&&e(Ht.logOut()),e(Ht.setStatusApp("idle")),t.next=14;break;case 9:throw t.prev=9,t.t0=t.catch(1),e(Ht.setStatusApp("failed")),e(Ht.setMessageStatus(t.t0.message)),new Error(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}())}})},$t=a(392),Qt=a(393),Xt=a(394),te={message:"",status:"idle",isInitialized:!1},ee=Object(p.a)(Object(p.a)({},A),y);function ae(){var t=Object(l.c)((function(t){return t.statusApp.status})),e=Object(l.c)((function(t){return t.statusApp.isInitialized})),a=Object(l.b)(),s=ne();return Object(n.useEffect)((function(){a(function(){var t=Object(b.a)(d.a.mark((function t(e){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h();case 3:0===(a=t.sent).resultCode&&e(ee.setMeData(a.data,!0)),e(ee.setAppInitialized(!0)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),D(t.t0,e);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}())}),[a]),e?Object(J.jsx)(Dt.d,{children:Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(Zt,{}),"load"===t&&Object(J.jsx)(Qt.a,{className:s.load}),Object(J.jsxs)(Xt.a,{fixed:!0,className:s.content,children:[Object(J.jsx)(Dt.b,{path:"/todolists",component:Nt}),Object(J.jsx)(Dt.b,{path:"/login",component:Wt})]}),Object(J.jsx)(Mt,{})]})}):Object(J.jsx)("div",{className:s.progress,children:Object(J.jsx)($t.a,{})})}var ne=Object(q.a)((function(){return Object(nt.a)({load:{position:"absolute",width:"100%"},progress:{position:"absolute",width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},page:{width:"100%",height:"100%"},content:{maxWidth:"90%"}})})),se=a(96),ie=a(168),re=a(153),ce=(Object(p.a)(Object(p.a)(Object(p.a)(Object(p.a)({},k),L),A),y),Object(se.b)({todoLists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GET-TODO-LISTS":return e.todoLists.map((function(t){return Object(p.a)(Object(p.a)({},t),{},{filter:"all",isLoad:!1})}));case"ADD-TODOLIST":return[].concat(Object(j.a)(t),[Object(p.a)(Object(p.a)({},e.todoList),{},{filter:"all"})]);case"CHANGE-TODOLIST-TITLE":return t.map((function(t){return t.id===e.todoListID?Object(p.a)(Object(p.a)({},t),{},{title:e.title}):t}));case"CHANGE-TODOLIST-FILTER":return t.map((function(t){return t.id===e.todoListID?Object(p.a)(Object(p.a)({},t),{},{filter:e.filter}):t}));case"REMOVE-TODOLIST":return t.filter((function(t){return t.id!==e.todoListId}));case"IS-DISABLE":return t.map((function(t){return t.id===e.todoListId?Object(p.a)(Object(p.a)({},t),{},{disable:e.disable}):t}));default:return t}},tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GET-TASK":return Object(p.a)(Object(p.a)({},t),{},Object(E.a)({},e.todoListId,Object(j.a)(e.tasks)));case"REMOVE-TASK":return Object(p.a)(Object(p.a)({},t),{},Object(E.a)({},e.todoListId,t[e.todoListId].filter((function(t){return t.id!==e.idTask}))));case"ADD-TASK":return Object(p.a)(Object(p.a)({},t),{},Object(E.a)({},e.task.todoListId,[e.task].concat(Object(j.a)(t[e.task.todoListId]))));case"ADD-TASKS-FOR-TODOLIST":return Object(p.a)(Object(p.a)({},t),{},Object(E.a)({},e.todoListId,[]));case"REMOVE-TODOLIST":var a=e.todoListId,n=Object(p.a)({},t);return delete n[a],n;case"CHANGE-TASK":return Object(p.a)(Object(p.a)({},t),{},Object(E.a)({},e.todoListId,t[e.todoListId].map((function(t){return t.id===e.idTask?e.task:t}))));default:return t}},statusApp:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET-APP-STATUS":return Object(p.a)(Object(p.a)({},t),{},{status:e.status});case"SET-MESSAGE-STATUS":return Object(p.a)(Object(p.a)({},t),{},{message:e.message});case"SET-APP-INITIALIZED":return Object(p.a)(Object(p.a)({},t),{},{isInitialized:e.isInitialized});default:return t}},isAuth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET-ME-DATA":return Object(p.a)(Object(p.a)(Object(p.a)({},t),e.data),{},{isAuth:e.isAuth});case"LOG-OUT":return{id:0,login:"",email:"",password:"",rememberMe:!1,captcha:!1,isAuth:!1};default:return t}},form:re.a})),oe=Object(se.c)(ce,Object(se.a)(ie.a)),le=a(72);r.a.render(Object(J.jsx)(le.a,{children:Object(J.jsx)(l.a,{store:oe,children:Object(J.jsx)(ae,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[345,1,2]]]);
//# sourceMappingURL=main.b0a3e9c4.chunk.js.map